{"version":3,"file":"ng-zorro-antd-core-addon.js","sources":["ng://ng-zorro-antd/core/addon/classlist_add.ts","ng://ng-zorro-antd/core/addon/string_template_outlet.ts","ng://ng-zorro-antd/core/addon/addon.module.ts"],"sourcesContent":["/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Directive, ElementRef, Input, Renderer2 } from '@angular/core';\n\n@Directive({\n  selector: '[nzClassListAdd]',\n  exportAs: 'nzClassListAdd'\n})\nexport class NzClassListAddDirective {\n  classList: string[] = [];\n\n  @Input()\n  set nzClassListAdd(list: string[]) {\n    this.classList.forEach(name => {\n      this.renderer.removeClass(this.elementRef.nativeElement, name);\n    });\n    list.forEach(name => {\n      this.renderer.addClass(this.elementRef.nativeElement, name);\n    });\n    this.classList = list;\n  }\n\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport {\n  Directive,\n  EmbeddedViewRef,\n  Input,\n  OnChanges,\n  SimpleChange,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\n\n@Directive({\n  selector: '[nzStringTemplateOutlet]',\n  exportAs: 'nzStringTemplateOutlet'\n})\nexport class NzStringTemplateOutletDirective implements OnChanges {\n  private isTemplate: boolean;\n  // tslint:disable-next-line:no-any\n  private inputTemplate: TemplateRef<any> | null = null;\n  private inputViewRef: EmbeddedViewRef<void> | null = null;\n  private defaultViewRef: EmbeddedViewRef<void> | null = null;\n\n  // tslint:disable-next-line:no-any\n  @Input() nzStringTemplateOutletContext: any | null = null;\n\n  @Input()\n  // tslint:disable-next-line:no-any\n  set nzStringTemplateOutlet(value: string | TemplateRef<any>) {\n    if (value instanceof TemplateRef) {\n      this.isTemplate = true;\n      this.inputTemplate = value;\n    } else {\n      this.isTemplate = false;\n    }\n  }\n\n  recreateView(): void {\n    if (!this.isTemplate) {\n      /** use default template when input is string **/\n      if (!this.defaultViewRef) {\n        if (this.defaultTemplate) {\n          this.defaultViewRef = this.viewContainer.createEmbeddedView(\n            this.defaultTemplate,\n            this.nzStringTemplateOutletContext\n          );\n        }\n      }\n    } else {\n      /** use input template when input is templateRef **/\n      if (!this.inputViewRef) {\n        if (this.inputTemplate) {\n          this.inputViewRef = this.viewContainer.createEmbeddedView(\n            this.inputTemplate,\n            this.nzStringTemplateOutletContext\n          );\n        }\n      }\n    }\n  }\n\n  // tslint:disable-next-line:no-any\n  private getType(value: string | TemplateRef<any>): 'template' | 'string' {\n    if (value instanceof TemplateRef) {\n      return 'template';\n    } else {\n      return 'string';\n    }\n  }\n\n  private shouldRecreateView(changes: SimpleChanges): boolean {\n    const { nzStringTemplateOutletContext, nzStringTemplateOutlet } = changes;\n    let shouldOutletRecreate = false;\n    if (nzStringTemplateOutlet) {\n      if (nzStringTemplateOutlet.firstChange) {\n        shouldOutletRecreate = true;\n      } else {\n        const previousOutletType = this.getType(nzStringTemplateOutlet.previousValue);\n        const currentOutletType = this.getType(nzStringTemplateOutlet.currentValue);\n        shouldOutletRecreate = !(previousOutletType === 'string' && currentOutletType === 'string');\n      }\n    }\n    const shouldContextRecreate =\n      nzStringTemplateOutletContext && this.hasContextShapeChanged(nzStringTemplateOutletContext);\n    return shouldContextRecreate || shouldOutletRecreate;\n  }\n\n  private hasContextShapeChanged(ctxChange: SimpleChange): boolean {\n    const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n    const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n\n    if (prevCtxKeys.length === currCtxKeys.length) {\n      for (const propName of currCtxKeys) {\n        if (prevCtxKeys.indexOf(propName) === -1) {\n          return true;\n        }\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  // tslint:disable-next-line:no-any\n  private updateExistingContext(ctx: any): void {\n    for (const propName of Object.keys(ctx)) {\n      // tslint:disable-next-line:no-any\n      (this.inputViewRef!.context as any)[propName] = this.nzStringTemplateOutletContext[propName];\n    }\n  }\n\n  constructor(private viewContainer: ViewContainerRef, private defaultTemplate: TemplateRef<void>) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const recreateView = this.shouldRecreateView(changes);\n    if (recreateView) {\n      if (this.viewContainer) {\n        this.viewContainer.clear();\n        this.defaultViewRef = null;\n        this.inputViewRef = null;\n      }\n      this.recreateView();\n    } else {\n      if (this.inputViewRef && this.nzStringTemplateOutletContext) {\n        this.updateExistingContext(this.nzStringTemplateOutletContext);\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NzClassListAddDirective } from './classlist_add';\nimport { NzStringTemplateOutletDirective } from './string_template_outlet';\n\n@NgModule({\n  imports: [CommonModule],\n  exports: [NzStringTemplateOutletDirective, NzClassListAddDirective],\n  declarations: [NzStringTemplateOutletDirective, NzClassListAddDirective]\n})\nexport class NzAddOnModule {}\n"],"names":[],"mappings":"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"}